{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/rakrawat/workspace/my-toons/pages/index.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Fragment } from 'react';\nimport Card from '../components/card';\nimport Filters from '../components/filters';\nimport { getStore } from '../redux/store';\nimport withRedux from \"next-redux-wrapper\";\nimport { getCharacters } from '../services/character'; // components\n\nimport Search from '../components/Search';\nimport Sorting from '../components/Sorting';\nimport CharacterList from '../components/CharacterList/CharacterList';\nimport Pagination from '../components/Pagination/Pagination';\nimport CharacterFilters from '../components/CharacterFilters/CharacterFilters';\nimport CharacterFiltersApplied from '../components/CharacterFiltersApplied/CharacterFiltersApplied';\n\nvar Home = /*#__PURE__*/function (_React$Component) {\n  _inherits(Home, _React$Component);\n\n  var _super = _createSuper(Home);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      characters: props.characters || [],\n      pagination: props.pagination || null,\n      page: 1,\n      filters: {}\n    };\n    _this.fetchCharacters = _this.fetchCharacters.bind(_assertThisInitialized(_this));\n    _this.paginateCharacters = _this.paginateCharacters.bind(_assertThisInitialized(_this));\n    _this.filterCharacters = _this.filterCharacters.bind(_assertThisInitialized(_this));\n    _this.searchCharacters = _this.searchCharacters.bind(_assertThisInitialized(_this));\n    _this.onAppliedFilterRemove = _this.onAppliedFilterRemove.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"fetchCharacters\",\n    value: function fetchCharacters() {\n      var _this2 = this;\n\n      getCharacters({\n        searchText: this.state.searchText || '',\n        species: this.state.filters.species || [],\n        gender: this.state.filters.gender || [],\n        page: this.state.page || 1\n      }).then(function (res) {\n        _this2.setState({\n          characters: res.data.results,\n          pagination: res.data.info\n        });\n      })[\"catch\"](function (err) {\n        return {\n          characters: [],\n          pagination: null\n        };\n      });\n    }\n  }, {\n    key: \"paginateCharacters\",\n    value: function paginateCharacters(page) {\n      var _this3 = this;\n\n      this.setState({\n        page: page\n      }, function () {\n        return _this3.fetchCharacters();\n      });\n    }\n  }, {\n    key: \"filterCharacters\",\n    value: function filterCharacters(filters) {\n      var _this4 = this;\n\n      this.setState({\n        filters: filters,\n        page: 1\n      }, function () {\n        return _this4.fetchCharacters();\n      });\n    }\n  }, {\n    key: \"searchCharacters\",\n    value: function searchCharacters(searchText) {\n      var _this5 = this;\n\n      this.setState({\n        searchText: searchText,\n        page: 1\n      }, function () {\n        return _this5.fetchCharacters();\n      });\n    }\n  }, {\n    key: \"onAppliedFilterRemove\",\n    value: function onAppliedFilterRemove(filterCategory, removedFilter) {\n      var _this6 = this;\n\n      var data = {\n        filters: _objectSpread({}, this.state.filters, _defineProperty({}, filterCategory, this.state.filters[filterCategory].filter(function (filter) {\n          return filter !== removedFilter;\n        })))\n      };\n      this.setState(_objectSpread({}, data), function () {\n        return _this6.fetchCharacters();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }\n      }, __jsx(\"div\", {\n        className: \"float-left width-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }\n      }, __jsx(CharacterFilters, {\n        characters: this.props.characters,\n        onFilterChange: this.filterCharacters,\n        selectedFilters: this.state.filters,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }\n      })), __jsx(\"div\", {\n        className: \"float-right width-85\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 17\n        }\n      }, __jsx(CharacterFiltersApplied, {\n        filters: this.state.filters,\n        onAppliedFilterRemove: this.onAppliedFilterRemove,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }\n      }), __jsx(Search, {\n        onSearch: this.searchCharacters,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }\n      }), __jsx(Sorting, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }\n      }), __jsx(CharacterList, {\n        characters: this.state.characters,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }\n      }), __jsx(Pagination, {\n        pagination: this.state.pagination,\n        onPaginate: this.paginateCharacters,\n        page: this.state.page,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }\n      })));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function getInitialProps(context) {\n      return _regeneratorRuntime.async(function getInitialProps$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", getCharacters().then(function (res) {\n                return {\n                  characters: res.data.results,\n                  pagination: res.data.info\n                };\n              })[\"catch\"](function (err) {\n                return {\n                  characters: [],\n                  pagination: null\n                };\n              }));\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }]);\n\n  return Home;\n}(React.Component);\n\nexport default Home;","map":{"version":3,"sources":["/Users/rakrawat/workspace/my-toons/pages/index.js"],"names":["React","Fragment","Card","Filters","getStore","withRedux","getCharacters","Search","Sorting","CharacterList","Pagination","CharacterFilters","CharacterFiltersApplied","Home","props","state","characters","pagination","page","filters","fetchCharacters","bind","paginateCharacters","filterCharacters","searchCharacters","onAppliedFilterRemove","searchText","species","gender","then","res","setState","data","results","info","err","filterCategory","removedFilter","filter","context","Component"],"mappings":"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","sourcesContent":["import React, {Fragment} from 'react';\nimport Card from '../components/card';\nimport Filters from '../components/filters';\nimport { getStore } from '../redux/store';\nimport withRedux from \"next-redux-wrapper\";\nimport {getCharacters} from '../services/character';\n\n// components\nimport Search from '../components/Search';\nimport Sorting from '../components/Sorting';\nimport CharacterList from '../components/CharacterList/CharacterList';\nimport Pagination from '../components/Pagination/Pagination';\nimport CharacterFilters from '../components/CharacterFilters/CharacterFilters';\nimport CharacterFiltersApplied from '../components/CharacterFiltersApplied/CharacterFiltersApplied';\n\nclass Home extends React.Component {\n\n    constructor (props) {\n        super (props);\n        this.state = {\n            characters: props.characters || [],\n            pagination: props.pagination || null,\n            page: 1,\n            filters: {}\n        };\n\n        this.fetchCharacters = this.fetchCharacters.bind(this);\n        this.paginateCharacters = this.paginateCharacters.bind(this);\n        this.filterCharacters = this.filterCharacters.bind(this);\n        this.searchCharacters = this.searchCharacters.bind(this);\n        this.onAppliedFilterRemove = this.onAppliedFilterRemove.bind(this);\n    }\n\n    static async getInitialProps (context) {\n        return getCharacters().then(res => {\n            return {\n                characters: res.data.results,\n                pagination: res.data.info\n            };\n        }).catch(err => {\n            return {\n                characters: [],\n                pagination: null\n            };\n        });\n    }\n\n    fetchCharacters() {\n        getCharacters({\n            searchText: this.state.searchText || '',\n            species: this.state.filters.species || [],\n            gender: this.state.filters.gender || [],\n            page: this.state.page || 1\n        }).then(res => {\n            this.setState({\n                characters: res.data.results,\n                pagination: res.data.info\n            });\n        }).catch(err => {\n            return {\n                characters: [],\n                pagination: null\n            };\n        });\n    }\n\n    paginateCharacters(page) {\n        this.setState({\n            page\n        }, () => this.fetchCharacters());\n    }\n\n    filterCharacters(filters) {\n        this.setState({\n            filters,\n            page: 1\n        }, () => this.fetchCharacters());\n    }\n\n    searchCharacters(searchText) {\n        this.setState({\n            searchText,\n            page: 1\n        }, () => this.fetchCharacters());\n    }\n\n    onAppliedFilterRemove(filterCategory, removedFilter) {\n        const data = {\n            filters: {\n                ...this.state.filters,\n                [filterCategory]: this.state.filters[filterCategory].filter(filter => filter !== removedFilter)\n            }\n        };\n\n        this.setState({\n            ...data\n        }, () => this.fetchCharacters());\n    }\n\n    render () {\n        return (\n            <div>\n                <div className=\"float-left width-12\">\n                    <CharacterFilters characters={this.props.characters} onFilterChange={this.filterCharacters} selectedFilters={this.state.filters} />\n                </div>\n                <div className=\"float-right width-85\">\n                    <CharacterFiltersApplied filters={this.state.filters} onAppliedFilterRemove={this.onAppliedFilterRemove} />\n                    <Search onSearch={this.searchCharacters} />\n                    <Sorting />\n                    <CharacterList characters={this.state.characters} />\n                    <Pagination pagination={this.state.pagination} onPaginate={this.paginateCharacters} page={this.state.page} />\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}