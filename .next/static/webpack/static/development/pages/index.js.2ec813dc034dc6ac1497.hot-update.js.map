{"version":3,"file":"static/webpack/static/development/pages/index.js.2ec813dc034dc6ac1497.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import React, {Fragment} from 'react';\nimport Card from '../components/card';\nimport Filters from '../components/filters';\nimport { getStore } from '../redux/store';\nimport withRedux from \"next-redux-wrapper\";\nimport {getCharacters} from '../services/character';\n\n// components\nimport Search from '../components/Search';\nimport Sorting from '../components/Sorting';\nimport CharacterList from '../components/CharacterList/CharacterList';\nimport Pagination from '../components/Pagination/Pagination';\nimport CharacterFilters from '../components/CharacterFilters/CharacterFilters';\nimport CharacterFiltersApplied from '../components/CharacterFiltersApplied/CharacterFiltersApplied';\n\nclass Home extends React.Component {\n\n    constructor (props) {\n        super (props);\n        this.state = {\n            characters: props.characters || [],\n            pagination: props.pagination || null,\n            page: 1,\n            filters: {}\n        };\n\n        this.fetchCharacters = this.fetchCharacters.bind(this);\n        this.paginateCharacters = this.paginateCharacters.bind(this);\n        this.filterCharacters = this.filterCharacters.bind(this);\n        this.searchCharacters = this.searchCharacters.bind(this);\n        this.onAppliedFilterRemove = this.onAppliedFilterRemove.bind(this);\n    }\n\n    static async getInitialProps (context) {\n        return getCharacters().then(res => {\n            return {\n                characters: res.data.results,\n                pagination: res.data.info\n            };\n        }).catch(err => {\n            return {\n                characters: [],\n                pagination: null\n            };\n        });\n    }\n\n    fetchCharacters() {\n        getCharacters({\n            search: this.state.searchText || '',\n            species: this.state.filters.species || [],\n            gender: this.state.filters.gender || [],\n            page: this.state.page || 1\n        }).then(res => {\n            this.setState({\n                characters: res.data.results,\n                pagination: res.data.info\n            });\n        }).catch(err => {\n            return {\n                characters: [],\n                pagination: null\n            };\n        });\n    }\n\n    paginateCharacters(page) {\n        this.setState({\n            page\n        }, () => this.fetchCharacters());\n    }\n\n    filterCharacters(filters) {\n        this.setState({\n            filters,\n            page: 1\n        }, () => this.fetchCharacters());\n    }\n\n    searchCharacters(searchText) {\n        this.setState({\n            searchText,\n            page: 1\n        }, () => this.fetchCharacters());\n    }\n\n    onAppliedFilterRemove(filterCategory, removedFilter) {\n        this.setState({\n            filters: {\n                ...this.state.filters,\n                [filterCategory]: this.state.filters[filterCategory].filter(filter => filter !== removedFilter)\n            }\n        });\n    }\n\n    render () {\n        return (\n            <div>\n                <div className=\"float-left width-12\">\n                    <CharacterFilters characters={this.props.characters} onFilterChange={this.filterCharacters} selectedFilters={this.state.filters} />\n                </div>\n                <div className=\"float-right width-85\">\n                    <CharacterFiltersApplied filters={this.state.filters} onAppliedFilterRemove={this.onAppliedFilterRemove} />\n                    <Search onSearch={this.searchCharacters} />\n                    <Sorting />\n                    <CharacterList characters={this.props.characters} />\n                    <Pagination pagination={this.props.pagination} onPaginate={this.paginateCharacters} />\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Home;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAEA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AACA;AACA;AAbA;AAcA;AACA;;;AAeA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAFA;AAIA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AADA;AAEA;AAAA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AAFA;AAGA;AAAA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AAFA;AAGA;AAAA;AACA;;;AAEA;AACA;AACA;AAEA;AAAA;AAHA;AAMA;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;AA7EA;;;;;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAFA;AAIA;AACA;;;;;;;;;;;AA9BA;AACA;AAiGA;;;;A","sourceRoot":""}